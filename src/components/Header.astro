---
import MobileMenu from "./MobileMenu.tsx";
import ThemeToggle from "./ThemeToggle.tsx";

const currentPath = Astro.url.pathname;

const desktopNavLinks = [
  { href: "/blog", label: "Blog" },
  { href: "/frases", label: "Frases" },
  { href: "/biblia", label: "Biblia" },
  { href: "/series", label: "Series" },
  { href: "/mapa", label: "Mapa" },
  { href: "/about", label: "Sobre mÃ­" },
  { href: "/guardados", label: "Guardados" },
];

// Helper para links activos
const isActive = (href: string) =>
  currentPath === href || (currentPath.startsWith(`${href}/`) && href !== "/");
---

<header
  class="h-[64px] bg-[#0a0a0a]/90 backdrop-blur-md border-b border-[#1a1a1a] sticky top-0 z-50 flex items-center justify-between"
  style="padding-left: max(1rem, calc((100% - 1200px) / 2)); padding-right: max(1rem, calc((100% - 1200px) / 2));"
>
  <!-- Logo Izquierda -->
  <a href="/" class="flex flex-col flex-shrink-0 group relative z-10">
    <div class="flex items-center tracking-tight leading-none mb-0.5">
      <span class="text-[#f5f5f5] font-[800] text-xl">Vito</span>
      <span class="text-lime-400 font-[800] text-xl">Cipher</span>
      {
        import.meta.env.DEV && (
          <div
            class="ml-2 relative flex items-center justify-center group"
            title="Modo desarrollo"
          >
            <span class="animate-ping absolute inline-flex h-2 w-2 rounded-full bg-red-400 opacity-75" />
            <span class="relative inline-flex rounded-full h-2 w-2 bg-red-500" />
          </div>
        )
      }
    </div>
    <span
      class="text-[#525252] text-[10px] uppercase tracking-[0.25em] font-medium leading-none"
    >
      por Augusto Melara
    </span>
  </a>

  <!-- Nav Centro (Desktop) -->
  <nav
    class="hidden md:flex items-center gap-6 absolute left-1/2 -translate-x-1/2"
  >
    {
      desktopNavLinks.map(({ href, label }) => {
        const active = isActive(href);
        return (
          <a
            href={href}
            class={`relative text-sm transition-colors duration-150 py-2 ${
              active
                ? "text-[#f5f5f5] font-medium"
                : "text-[#737373] hover:text-[#f5f5f5]"
            }`}
          >
            {label}
            {active && (
              <span class="absolute -bottom-1 left-1/2 -translate-x-1/2 w-[3px] h-[3px] bg-lime-400 rounded-full" />
            )}
          </a>
        );
      })
    }
  </nav>

  <!-- Acciones Derecha -->
  <div
    class="flex items-center flex-shrink-0 z-10 w-auto justify-end gap-2 relative"
  >
    <!-- Theme Toggle -->
    <ThemeToggle client:load />

    <!-- Hamburger Menu (Mobile) -->
    <MobileMenu client:load currentPath={currentPath} />
  </div>
</header>
