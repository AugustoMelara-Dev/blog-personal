---
import BaseLayout from "../../layouts/BaseLayout.astro";
import PostCard from "../../components/PostCard.astro";
import { getCollection } from "astro:content";
import readingTime from "reading-time";

const bibliaPosts = (await getCollection("posts"))
  .filter((post) => !post.data.draft && post.data.tags.includes("biblia"))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title="Biblia" description="Personajes reales. Decisiones eternas.">
  <div class="px-6 py-16 md:py-24 max-w-5xl mx-auto">
    <header class="mb-20 text-center max-w-2xl mx-auto">
      <p
        class="italic text-base md:text-lg text-[#525252] mb-8 leading-relaxed"
      >
        "Porque la sabiduría protege como protege el dinero, pero la sabiduría
        es mejor porque da vida a quien la tiene."
        <span class="block mt-4 not-italic text-xs tracking-widest uppercase"
          >— Eclesiastés 7:12</span
        >
      </p>
      <h1 class="text-4xl md:text-5xl font-bold text-[#f5f5f5] mb-4">Biblia</h1>
      <p class="text-xl text-[#a3a3a3]">
        Personajes reales. Decisiones eternas. Lecciones que el tiempo no borró.
      </p>
    </header>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {
        bibliaPosts.map((post) => {
          const stats = readingTime(post.body || "");
          const readTime = stats.text.replace("read", "lectura");

          return (
            <PostCard
              title={post.data.title}
              description={post.data.description}
              pubDate={post.data.pubDate}
              tags={post.data.tags}
              readingTime={readTime}
              slug={post.slug}
              versiculo={post.data.versiculo}
            />
          );
        })
      }
    </div>

    {
      bibliaPosts.length === 0 && (
        <div class="text-center text-[#737373] mt-12">
          <p>Aún no hay estudios bíblicos publicados.</p>
        </div>
      )
    }
  </div>
</BaseLayout>
