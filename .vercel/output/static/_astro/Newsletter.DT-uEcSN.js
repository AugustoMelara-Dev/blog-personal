import{j as s}from"./jsx-runtime.TBa3i5EZ.js";import{r as l}from"./index.CVf8TyFT.js";function f(){const[o,n]=l.useState(""),[e,t]=l.useState("idle"),[c,a]=l.useState(""),u=async i=>{if(i.preventDefault(),!o||!/^\S+@\S+\.\S+$/.test(o)){t("error"),a("Por favor, introduce un email válido.");return}t("loading");try{const r=await fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})}),d=await r.json();if(r.ok&&d.success)t("success"),a("¡Listo! Te avisaré con cada nuevo post."),n("");else throw new Error(d.error||"Error al suscribirse")}catch(r){console.error(r),t("error"),a(r.message||"Ocurrió un error. Inténtalo de nuevo.")}};return s.jsxs("div",{className:"w-full max-w-md mx-auto sm:mx-0",children:[s.jsxs("form",{onSubmit:u,className:"flex flex-col sm:flex-row gap-3",children:[s.jsx("input",{type:"email",value:o,onChange:i=>{n(i.target.value),t("idle")},placeholder:"tu@email.com",className:"flex-1 bg-[#111111] border border-[#1f1f1f] text-[#f5f5f5] placeholder-[#525252] rounded-md px-4 py-3 focus:border-lime-400/50 focus:outline-none transition-colors",disabled:e==="loading"||e==="success"}),s.jsx("button",{type:"submit",disabled:e==="loading"||e==="success",className:"bg-lime-400 text-[#0a0a0a] font-semibold rounded-md px-6 py-3 hover:bg-lime-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:e==="loading"?"Suscribiendo...":"Suscribirse"})]}),e==="success"&&s.jsx("p",{className:"mt-3 text-sm text-lime-400",children:c}),e==="error"&&s.jsx("p",{className:"mt-3 text-sm text-red-500",children:c})]})}export{f as default};
